## 深度缓冲，透明度与混合

###深度缓冲

回顾一下渲染管线：

1. 每个顶点被顶点着色器处理一次，进行相应的变换；
2. 顶点之间进行线性插值，得到许多片元递给片元着色器；
3. 每个片元被片元着色器处理一次，算出它的颜色；
4. 把结果送给帧缓存。

如果模型中有前后多个物体，同一个像素就会传入不同的颜色让片元着色器处理多次，我们肯定只绘制最前面物体的颜色，遮挡后面的物体，着色器如何知道哪个前哪个后，这就需要深度缓冲。深度缓冲记录着每个像素点的深度，在绘制每个像素之前，如果启用了深度缓冲，系统会把它的深度值和已经存储在缓冲里的这个像素的深度值进行比较，而具体保留哪个值，由设置决定。

###混合

混合常用来绘制透明或半透明物体。混合是把对应同一个片元的不同物体的颜色，通过需要的方式结合在一起计算，得到一个新的颜色送入帧缓存。具体用什么方式计算，也由设置决定。

这一节，我们用深度缓冲与混合来实现半透明效果，如图9。

>![图9](../image/C1_Start/1_009.gif)

>图9 。
